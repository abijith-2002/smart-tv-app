{"is_source_file": true, "format": "JavaScript", "description": "This JavaScript source file implements a focus management utility for a Smart TV web application. It includes helpers for DOM element querying, focus handling, key event processing, page identification, and navigation. The code enables keyboard/remote control navigation within different pages of the app, with a FocusManager class managing focusable elements and their navigation, and a global event listener setup for key events and back navigation handling.", "external_files": [], "external_methods": ["document.querySelector", "document.querySelectorAll", "window.location.pathname", "window.location.href"], "published": [], "classes": [{"name": "FocusManager", "description": "A class that manages focusable elements within a container, allowing initialization, focusing the first element, moving focus by index or grid direction, and handling key events for navigation."}], "methods": [{"name": "qs(sel, ctx)", "description": "Selects the first element matching the selector within the optional context.", "scope": "", "scopeKind": ""}, {"name": "qsa(sel, ctx)", "description": "Selects all elements matching the selector within the optional context.", "scope": "", "scopeKind": ""}, {"name": "tryFocus(el)", "description": "Attempts to focus a DOM element, handling exceptions and scrolling into view.", "scope": "", "scopeKind": ""}, {"name": "pageName()", "description": "Returns the current page filename in lowercase, derived from window.location.pathname.", "scope": "", "scopeKind": ""}, {"name": "isIndexPage()", "description": "Checks if the current page is index.html.", "scope": "", "scopeKind": ""}, {"name": "isHomePage()", "description": "Checks if the current page is home.html.", "scope": "", "scopeKind": ""}, {"name": "isLoginPage()", "description": "Checks if the current page is login.html.", "scope": "", "scopeKind": ""}, {"name": "isMyPlanPage()", "description": "Checks if the current page is myplan.html or my-plan.html.", "scope": "", "scopeKind": ""}, {"name": "isVideoDetailPage()", "description": "Checks if the current page is video-detail.html.", "scope": "", "scopeKind": ""}, {"name": "debounceKey(interval)", "description": "Prevents rapid repeated key handling within a specified interval.", "scope": "", "scopeKind": ""}, {"name": "handleBackNavigation()", "description": "Handles back navigation logic based on current page.", "scope": "", "scopeKind": ""}, {"name": "installGlobalKeyDispatcher(activeManager)", "description": "Sets up global event listeners for hardware key events and keydown for remote control navigation.", "scope": "", "scopeKind": ""}, {"name": "boot()", "description": "Initializes focus management depending on the current page, and installs global key dispatcher.", "scope": "", "scopeKind": ""}, {"name": "AnonymousFunction8b18807a0100(a, b)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "AnonymousFunction8b18807a0200(el)", "scope": "nodes", "scopeKind": "function", "description": "unavailable"}, {"name": "AnonymousFunction8b18807a0300(el, i)", "scope": "items", "scopeKind": "function", "description": "unavailable"}, {"name": "AnonymousFunction8b18807a0400(ev)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "AnonymousFunction8b18807a0500(e)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "FocusManager()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "focusByIndex(i)", "scope": "FocusManager", "scopeKind": "class", "description": "unavailable"}, {"name": "focusFirst()", "scope": "FocusManager", "scopeKind": "class", "description": "unavailable"}, {"name": "handleKeydown(e)", "scope": "FocusManager", "scopeKind": "class", "description": "unavailable"}, {"name": "init(containerEl)", "scope": "FocusManager", "scopeKind": "class", "description": "unavailable"}, {"name": "move(delta)", "scope": "FocusManager", "scopeKind": "class", "description": "unavailable"}, {"name": "moveGrid(dir)", "scope": "FocusManager", "scopeKind": "class", "description": "unavailable"}, {"name": "restoreOr(fallbackEl)", "scope": "FocusMemory", "scopeKind": "class", "description": "unavailable"}, {"name": "save()", "scope": "FocusMemory", "scopeKind": "class", "description": "unavailable"}, {"name": "slice((ctx || document).querySelectorAll(sel))", "scope": "Array", "scopeKind": "class", "description": "unavailable"}, {"name": "sortByIndex(nodes)", "scope": "FocusManager", "scopeKind": "function", "description": "unavailable"}], "calls": ["document.querySelector", "document.querySelectorAll", "window.location.pathname", "window.location.href", "Date.now", "tryFocus"], "search-terms": ["Smart TV focus management", "remote control navigation", "JavaScript focus handling", "DPAD key events", "page-specific focus logic"], "state": 2, "file_id": 42, "knowledge_revision": 201, "git_revision": "", "ctags": [{"_type": "tag", "name": "AnonymousFunction8b18807a0100", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^      return nodes.sort(function (a, b) {$/", "language": "JavaScript", "kind": "function", "signature": "(a, b)"}, {"_type": "tag", "name": "AnonymousFunction8b18807a0200", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^      nodes.forEach(function (el) {$/", "language": "JavaScript", "kind": "function", "signature": "(el)", "scope": "nodes", "scopeKind": "function"}, {"_type": "tag", "name": "AnonymousFunction8b18807a0300", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^      this.items.forEach(function (el, i) { el.setAttribute('data-focus-order', String(i)); });$/", "language": "JavaScript", "kind": "function", "signature": "(el, i)", "scope": "items", "scopeKind": "function"}, {"_type": "tag", "name": "AnonymousFunction8b18807a0400", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    document.addEventListener('tizenhwkey', function (ev) {$/", "language": "JavaScript", "kind": "function", "signature": "(ev)"}, {"_type": "tag", "name": "AnonymousFunction8b18807a0500", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    document.addEventListener('keydown', function (e) {$/", "language": "JavaScript", "kind": "function", "signature": "(e)"}, {"_type": "tag", "name": "Array", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^  function qsa(sel, ctx) { return Array.prototype.slice.call((ctx || document).querySelectorAll(/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "BACK", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    BACK: 'Backspace',$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "DOWN", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    DOWN: 'ArrowDown',$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "ENTER", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    ENTER: 'Enter',$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "FAST_FORWARD", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    FAST_FORWARD: 'MediaFastForward',$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "FocusManager", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    FocusManager.prototype.init = function (containerEl) {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "FocusManager", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    function FocusManager() {$/", "language": "JavaScript", "kind": "class", "signature": "()", "scope": "FocusManager", "scopeKind": "class"}, {"_type": "tag", "name": "FocusManager", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^  var FocusManager = (function () {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "FocusMemory", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^  var FocusMemory = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "HOME", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    HOME: 'Home',$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "Keys", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^  var Keys = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "LEFT", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    LEFT: 'ArrowLeft',$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "PAUSE", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    PAUSE: 'MediaPause',$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "PLAY", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    PLAY: 'MediaPlay',$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "PLAY_PAUSE", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    PLAY_PAUSE: 'MediaPlayPause',$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "REWIND", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    REWIND: 'MediaRewind'$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "RIGHT", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    RIGHT: 'ArrowRight',$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "SPACE", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    SPACE: ' ',$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "STOP", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    STOP: 'MediaStop',$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "UP", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    UP: 'ArrowUp',$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "boot", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^  function boot() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "debounceKey", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^  function debounceKey(interval) {$/", "language": "JavaScript", "kind": "function", "signature": "(interval)"}, {"_type": "tag", "name": "focusByIndex", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    FocusManager.prototype.focusByIndex = function (i) {$/", "language": "JavaScript", "kind": "method", "signature": "(i)", "scope": "FocusManager", "scopeKind": "class"}, {"_type": "tag", "name": "focusFirst", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    FocusManager.prototype.focusFirst = function () {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "FocusManager", "scopeKind": "class"}, {"_type": "tag", "name": "handleBackNavigation", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^  function handleBackNavigation() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "handleKeydown", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    FocusManager.prototype.handleKeydown = function (e) {$/", "language": "JavaScript", "kind": "method", "signature": "(e)", "scope": "FocusManager", "scopeKind": "class"}, {"_type": "tag", "name": "init", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    FocusManager.prototype.init = function (containerEl) {$/", "language": "JavaScript", "kind": "method", "signature": "(containerEl)", "scope": "FocusManager", "scopeKind": "class"}, {"_type": "tag", "name": "installGlobalKeyDispatcher", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^  function installGlobalKeyDispatcher(activeManager) {$/", "language": "JavaScript", "kind": "function", "signature": "(activeManager)"}, {"_type": "tag", "name": "isHomePage", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^  function isHomePage() { return pageName() === 'home.html'; }$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "isIndexPage", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^  function isIndexPage() { return pageName() === 'index.html'; }$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "isLoginPage", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^  function isLoginPage() { return pageName() === 'login.html'; }$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "isMyPlanPage", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^  function isMyPlanPage() { return pageName() === 'myplan.html' || pageName() === 'my-plan.html'/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "isVideoDetailPage", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^  function isVideoDetailPage() { return pageName() === 'video-detail.html'; }$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "lastByPage", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    lastByPage: {},$/", "language": "JavaScript", "kind": "property", "scope": "FocusMemory", "scopeKind": "class"}, {"_type": "tag", "name": "lastKeyTime", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^  var lastKeyTime = 0;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "move", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    FocusManager.prototype.move = function (delta) {$/", "language": "JavaScript", "kind": "method", "signature": "(delta)", "scope": "FocusManager", "scopeKind": "class"}, {"_type": "tag", "name": "moveGrid", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    FocusManager.prototype.moveGrid = function (dir) {$/", "language": "JavaScript", "kind": "method", "signature": "(dir)", "scope": "FocusManager", "scopeKind": "class"}, {"_type": "tag", "name": "pageName", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^  function pageName() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "qs", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^  function qs(sel, ctx) { return (ctx || document).querySelector(sel); }$/", "language": "JavaScript", "kind": "function", "signature": "(sel, ctx)"}, {"_type": "tag", "name": "qsa", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^  function qsa(sel, ctx) { return Array.prototype.slice.call((ctx || document).querySelectorAll(/", "language": "JavaScript", "kind": "function", "signature": "(sel, ctx)"}, {"_type": "tag", "name": "restoreOr", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    restoreOr: function (fallbackEl) {$/", "language": "JavaScript", "kind": "method", "signature": "(fallbackEl)", "scope": "FocusMemory", "scopeKind": "class"}, {"_type": "tag", "name": "save", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    save: function () {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "FocusMemory", "scopeKind": "class"}, {"_type": "tag", "name": "slice", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^  function qsa(sel, ctx) { return Array.prototype.slice.call((ctx || document).querySelectorAll(/", "language": "JavaScript", "kind": "method", "signature": "((ctx || document).querySelectorAll(sel))", "scope": "Array", "scopeKind": "class"}, {"_type": "tag", "name": "sortByIndex", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^    function sortByIndex(nodes) {$/", "language": "JavaScript", "kind": "function", "signature": "(nodes)", "scope": "FocusManager", "scopeKind": "function"}, {"_type": "tag", "name": "tryFocus", "path": "/home/kavia/workspace/code-generation/smart-tv-app/MyTV/js/app.js", "pattern": "/^  function tryFocus(el) {$/", "language": "JavaScript", "kind": "function", "signature": "(el)"}], "hash": "837128fa8c50e7c3cc0d647cb4e2087e", "format-version": 4, "code-base-name": "smart-tv-app", "filename": "MyTV/js/app.js", "fields": [{"name": "BACK: 'Backspace',", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "DOWN: 'ArrowDown',", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "ENTER: 'Enter',", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "FAST_FORWARD: 'MediaFastForward',", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "HOME: 'Home',", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "LEFT: 'ArrowLeft',", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "PAUSE: 'MediaPause',", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "PLAY: 'MediaPlay',", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "PLAY_PAUSE: 'MediaPlayPause',", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "REWIND: 'MediaRewind'", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "RIGHT: 'ArrowRight',", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "SPACE: ' ',", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "STOP: 'MediaStop',", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "UP: 'ArrowUp',", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "lastByPage: {},", "scope": "FocusMemory", "scopeKind": "class", "description": "unavailable"}, {"name": "var lastKeyTime = 0;", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"201": ""}]}