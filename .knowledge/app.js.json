{"is_source_file": true, "format": "JavaScript", "description": "This file provides core UI focus management and page-specific navigation for a smart TV web application. It includes utilities for DOM element querying, focus handling, navigation logic based on page type, and global event dispatchers to handle remote control key presses.", "external_files": [], "external_methods": [], "published": ["Keys", "FocusManager", "FocusMemory", "handleBackNavigation", "installGlobalKeyDispatcher", "boot"], "classes": [{"name": "FocusManager", "description": "A class to manage focusable elements within a container, enabling navigation through key events, focus wrapping, and focus restoration."}], "methods": [{"name": "qs(sel, ctx)", "description": "Selects a single DOM element matching the selector within an optional context.", "scope": "", "scopeKind": ""}, {"name": "qsa(sel, ctx)", "description": "Selects all DOM elements matching the selector within an optional context, returning an array.", "scope": "", "scopeKind": ""}, {"name": "tryFocus(el)", "description": "Attempts to focus an element, scrolling it into view if necessary, with fallback handling.", "scope": "", "scopeKind": ""}, {"name": "pageName()", "description": "Derives the current page's filename from the URL.", "scope": "", "scopeKind": ""}, {"name": "isIndexPage()", "description": "Checks if the current page is 'index.html'.", "scope": "", "scopeKind": ""}, {"name": "isHomePage()", "description": "Checks if the current page is 'home.html'.", "scope": "", "scopeKind": ""}, {"name": "isLoginPage()", "description": "Checks if the current page is 'login.html'.", "scope": "", "scopeKind": ""}, {"name": "isMyPlanPage()", "description": "Checks if the current page is 'myplan.html' or 'my-plan.html'.", "scope": "", "scopeKind": ""}, {"name": "isVideoDetailPage()", "description": "Checks if the current page is 'video-detail.html'.", "scope": "", "scopeKind": ""}, {"name": "debounceKey(interval)", "description": "Prevents rapid repeated key handling within a specified interval.", "scope": "", "scopeKind": ""}, {"name": "FocusMemory.save", "description": "Stores the last active element for the current page."}, {"name": "FocusMemory.restoreOr", "description": "Restores focus to the last stored element for the page, or to a fallback element."}, {"name": "handleBackNavigation()", "description": "Handles navigation logic for back actions based on current page context.", "scope": "", "scopeKind": ""}, {"name": "installGlobalKeyDispatcher(activeManager)", "description": "Sets up global event listeners to delegate key events to the focus manager and handle system keys.", "scope": "", "scopeKind": ""}, {"name": "boot()", "description": "Initializes focus management and page-specific focus restore on DOM ready.", "scope": "", "scopeKind": ""}, {"name": "AnonymousFunction0e96da6f0100(a, b)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "AnonymousFunction0e96da6f0200(el, i)", "scope": "nodes", "scopeKind": "function", "description": "unavailable"}, {"name": "AnonymousFunction0e96da6f0300(el, i)", "scope": "items", "scopeKind": "function", "description": "unavailable"}, {"name": "AnonymousFunction0e96da6f0400(ev)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "AnonymousFunction0e96da6f0500(e)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "FocusManager()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "focusByIndex(i)", "scope": "FocusManager", "scopeKind": "class", "description": "unavailable"}, {"name": "focusFirst()", "scope": "FocusManager", "scopeKind": "class", "description": "unavailable"}, {"name": "handleKeydown(e)", "scope": "FocusManager", "scopeKind": "class", "description": "unavailable"}, {"name": "init(containerEl)", "scope": "FocusManager", "scopeKind": "class", "description": "unavailable"}, {"name": "move(delta)", "scope": "FocusManager", "scopeKind": "class", "description": "unavailable"}, {"name": "moveGrid(dir)", "scope": "FocusManager", "scopeKind": "class", "description": "unavailable"}, {"name": "restoreOr(fallbackEl)", "scope": "FocusMemory", "scopeKind": "class", "description": "unavailable"}, {"name": "save()", "scope": "FocusMemory", "scopeKind": "class", "description": "unavailable"}, {"name": "slice((ctx || document).querySelectorAll(sel))", "scope": "Array", "scopeKind": "class", "description": "unavailable"}, {"name": "sortByIndex(nodes)", "scope": "FocusManager", "scopeKind": "function", "description": "unavailable"}], "calls": ["document.querySelector", "document.querySelectorAll", "el.focus", "el.scrollIntoView", "window.location.href", "window.location.pathname", "document.activeElement"], "search-terms": ["focus management", "TV remote navigation", "key handling", "page focus restoration", "grid focus movement", "single page application navigation", "smart TV app"], "state": 2, "file_id": 10, "knowledge_revision": 218, "git_revision": "d75d4f9a5f4c4c5f9378a10b7e74d80074a10b15", "revision_history": [{"30": ""}, {"36": "d3d71d9482881416638c4028014ef79ad0418ba7"}, {"42": "d3d71d9482881416638c4028014ef79ad0418ba7"}, {"51": "425b509d37547633bef55f21b0299fdfdda5d4b0"}, {"65": "016a857b4315a80d55bab739b8b9dbb8fa331109"}, {"139": "2b099473e57bb424366994da5ae1e009fc11abde"}, {"140": "2b099473e57bb424366994da5ae1e009fc11abde"}, {"146": "80dc9db74f17b83de17075e5f40cd408c5ef4cd3"}, {"161": "a5089752b854d3c25d3283db1961b5e19ddcc0d6"}, {"218": "d75d4f9a5f4c4c5f9378a10b7e74d80074a10b15"}], "ctags": [{"_type": "tag", "name": "AnonymousFunction0e96da6f0100", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^      return nodes.sort(function (a, b) {$/", "language": "JavaScript", "kind": "function", "signature": "(a, b)"}, {"_type": "tag", "name": "AnonymousFunction0e96da6f0200", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^      nodes.forEach(function (el, i) {$/", "language": "JavaScript", "kind": "function", "signature": "(el, i)", "scope": "nodes", "scopeKind": "function"}, {"_type": "tag", "name": "AnonymousFunction0e96da6f0300", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^      this.items.forEach(function (el, i) { el.setAttribute('data-focus-order', String(i)); });$/", "language": "JavaScript", "kind": "function", "signature": "(el, i)", "scope": "items", "scopeKind": "function"}, {"_type": "tag", "name": "AnonymousFunction0e96da6f0400", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    document.addEventListener('tizenhwkey', function (ev) {$/", "language": "JavaScript", "kind": "function", "signature": "(ev)"}, {"_type": "tag", "name": "AnonymousFunction0e96da6f0500", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    document.addEventListener('keydown', function (e) {$/", "language": "JavaScript", "kind": "function", "signature": "(e)"}, {"_type": "tag", "name": "Array", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^  function qsa(sel, ctx) { return Array.prototype.slice.call((ctx || document).querySelectorAll(/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "BACK", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    BACK: 'Backspace',$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "DOWN", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    DOWN: 'ArrowDown',$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "ENTER", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    ENTER: 'Enter',$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "FAST_FORWARD", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    FAST_FORWARD: 'MediaFastForward',$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "FocusManager", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    FocusManager.prototype.init = function (containerEl) {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "FocusManager", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    function FocusManager() {$/", "language": "JavaScript", "kind": "class", "signature": "()", "scope": "FocusManager", "scopeKind": "class"}, {"_type": "tag", "name": "FocusManager", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^  var FocusManager = (function () {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "FocusMemory", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^  var FocusMemory = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "HOME", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    HOME: 'Home',$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "Keys", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^  var Keys = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "LEFT", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    LEFT: 'ArrowLeft',$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "PAUSE", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    PAUSE: 'MediaPause',$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "PLAY", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    PLAY: 'MediaPlay',$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "PLAY_PAUSE", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    PLAY_PAUSE: 'MediaPlayPause',$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "REWIND", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    REWIND: 'MediaRewind'$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "RIGHT", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    RIGHT: 'ArrowRight',$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "SPACE", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    SPACE: ' ',$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "STOP", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    STOP: 'MediaStop',$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "UP", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    UP: 'ArrowUp',$/", "language": "JavaScript", "kind": "property", "scope": "Keys", "scopeKind": "class"}, {"_type": "tag", "name": "boot", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^  function boot() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "debounceKey", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^  function debounceKey(interval) {$/", "language": "JavaScript", "kind": "function", "signature": "(interval)"}, {"_type": "tag", "name": "focusByIndex", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    FocusManager.prototype.focusByIndex = function (i) {$/", "language": "JavaScript", "kind": "method", "signature": "(i)", "scope": "FocusManager", "scopeKind": "class"}, {"_type": "tag", "name": "focusFirst", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    FocusManager.prototype.focusFirst = function () {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "FocusManager", "scopeKind": "class"}, {"_type": "tag", "name": "handleBackNavigation", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^  function handleBackNavigation() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "handleKeydown", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    FocusManager.prototype.handleKeydown = function (e) {$/", "language": "JavaScript", "kind": "method", "signature": "(e)", "scope": "FocusManager", "scopeKind": "class"}, {"_type": "tag", "name": "init", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    FocusManager.prototype.init = function (containerEl) {$/", "language": "JavaScript", "kind": "method", "signature": "(containerEl)", "scope": "FocusManager", "scopeKind": "class"}, {"_type": "tag", "name": "installGlobalKeyDispatcher", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^  function installGlobalKeyDispatcher(activeManager) {$/", "language": "JavaScript", "kind": "function", "signature": "(activeManager)"}, {"_type": "tag", "name": "isHomePage", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^  function isHomePage() { return pageName() === 'home.html'; }$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "isIndexPage", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^  function isIndexPage() { return pageName() === 'index.html'; }$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "isLoginPage", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^  function isLoginPage() { return pageName() === 'login.html'; }$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "isMyPlanPage", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^  function isMyPlanPage() { return pageName() === 'myplan.html' || pageName() === 'my-plan.html'/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "isVideoDetailPage", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^  function isVideoDetailPage() { return pageName() === 'video-detail.html'; }$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "lastByPage", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    lastByPage: {},$/", "language": "JavaScript", "kind": "property", "scope": "FocusMemory", "scopeKind": "class"}, {"_type": "tag", "name": "lastKeyTime", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^  var lastKeyTime = 0;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "move", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    FocusManager.prototype.move = function (delta) {$/", "language": "JavaScript", "kind": "method", "signature": "(delta)", "scope": "FocusManager", "scopeKind": "class"}, {"_type": "tag", "name": "moveGrid", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    FocusManager.prototype.moveGrid = function (dir) {$/", "language": "JavaScript", "kind": "method", "signature": "(dir)", "scope": "FocusManager", "scopeKind": "class"}, {"_type": "tag", "name": "pageName", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^  function pageName() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "qs", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^  function qs(sel, ctx) { return (ctx || document).querySelector(sel); }$/", "language": "JavaScript", "kind": "function", "signature": "(sel, ctx)"}, {"_type": "tag", "name": "qsa", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^  function qsa(sel, ctx) { return Array.prototype.slice.call((ctx || document).querySelectorAll(/", "language": "JavaScript", "kind": "function", "signature": "(sel, ctx)"}, {"_type": "tag", "name": "restoreOr", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    restoreOr: function (fallbackEl) {$/", "language": "JavaScript", "kind": "method", "signature": "(fallbackEl)", "scope": "FocusMemory", "scopeKind": "class"}, {"_type": "tag", "name": "save", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    save: function () {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "FocusMemory", "scopeKind": "class"}, {"_type": "tag", "name": "slice", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^  function qsa(sel, ctx) { return Array.prototype.slice.call((ctx || document).querySelectorAll(/", "language": "JavaScript", "kind": "method", "signature": "((ctx || document).querySelectorAll(sel))", "scope": "Array", "scopeKind": "class"}, {"_type": "tag", "name": "sortByIndex", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^    function sortByIndex(nodes) {$/", "language": "JavaScript", "kind": "function", "signature": "(nodes)", "scope": "FocusManager", "scopeKind": "function"}, {"_type": "tag", "name": "tryFocus", "path": "/home/kavia/workspace/code-generation/smart-tv-app/app.js", "pattern": "/^  function tryFocus(el) {$/", "language": "JavaScript", "kind": "function", "signature": "(el)"}], "hash": "95a5fbf5cd58edf605e7ee51793a24ea", "format-version": 4, "code-base-name": "smart-tv-app", "filename": "app.js", "fields": [{"name": "BACK: 'Backspace',", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "DOWN: 'ArrowDown',", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "ENTER: 'Enter',", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "FAST_FORWARD: 'MediaFastForward',", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "HOME: 'Home',", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "LEFT: 'ArrowLeft',", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "PAUSE: 'MediaPause',", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "PLAY: 'MediaPlay',", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "PLAY_PAUSE: 'MediaPlayPause',", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "REWIND: 'MediaRewind'", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "RIGHT: 'ArrowRight',", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "SPACE: ' ',", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "STOP: 'MediaStop',", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "UP: 'ArrowUp',", "scope": "Keys", "scopeKind": "class", "description": "unavailable"}, {"name": "lastByPage: {},", "scope": "FocusMemory", "scopeKind": "class", "description": "unavailable"}, {"name": "var lastKeyTime = 0;", "scope": "", "scopeKind": "", "description": "unavailable"}]}